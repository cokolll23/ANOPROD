import{c2 as k,r as y,c as u,e0 as O,L as D,x as G,R as h,S as r,e as _,V as i,ad as I}from"./index.a1748043.js";import{_ as B}from"./KtLink.5d7d273c.js";import{_ as E}from"./KtIconSkeleton.6843b24f.js";import{_ as N}from"./KtUserCardSkeleton.a94624ce.js";function x(){const e=k(),t=y(!1),d=u(()=>{var a;const o=(a=e.POSTS)!=null?a:Object.create(null);return Object.keys(o).map(c=>{const n=o[c],p=e.USERS[n.AUTHOR_ID];let l=null,P=-1;for(;++P<e.BADGES.length;){const g=e.BADGES[P],v=Number(n.BADGE_ID),S=Number(g.ID);if(v===S){l=O.find(b=>b.CODE===g.CODE);break}}return typeof l=="undefined"?Object.assign({SENDER:p},n):Object.assign({SENDER:p},n,l)})}),m=u(()=>e.NAV.pageSize*e.NAV.currentPage<e.NAV.recordCount),s=u(()=>e.NAV.currentPage>1);return{gratitudePosts:d,canLoadMorePosts:m,canLoadPreviousPosts:s,gratitudePostsLoading:t,openGratitudePostPage:o=>{const a=window.BX,c={width:1e3};a.SidePanel.Instance.open(o,c)},loadMorePosts:async()=>{try{t.value=!0,await e.loadMorePosts()}finally{t.value=!1}},loadPreviousPosts:async()=>{try{t.value=!0,await e.loadPreviousPosts()}finally{t.value=!1}}}}const A={class:"kt-gratitude-post"},w={class:"kt-gratitude-post__left"},C={class:"kt-gratitude-post__right"},V={class:"kt-gratitude-post__content"},j=["datetime"],z=D({__name:"KtGratitudesPostItem",props:{title:{},url:{},datetime:{},sender:{},icon:{},iconColor:{}},setup(e){const t=e,{openGratitudePostPage:d}=x();return(m,s)=>(G(),h("div",A,[r("div",w,[_(i(N),{user:t.sender,size:"md","hide-content":""},null,8,["user"]),_(i(E),{name:t.icon,"background-color":t.iconColor,color:"white",size:"sm","icon-size":"20px"},null,8,["name","background-color"])]),r("div",C,[r("div",V,[_(i(B),{text:t.title,class:"kt-gratitude-post__title ellipsis",onClick:s[0]||(s[0]=f=>i(d)(t.url))},null,8,["text"]),r("time",{class:"kt-gratitude-post__time",datetime:t.datetime},I(t.datetime),9,j)])])]))}});var U=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{U as K,z as _,x as u};
