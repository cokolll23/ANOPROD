import{L as V,X as q,N as H,Y as Z,c as n,r as l,w as j,Z as E,x as m,y as b,z as O,S as a,e as s,V as o,$ as k,R as $,a0 as D,a1 as S,a2 as tt,a3 as x,I as et}from"./index.a1748043.js";import{_ as A}from"./KtViewCounter.d7f8eb76.js";import{_ as at,a as ot,K as nt}from"./KtWidgetWrapper.6a945d5d.js";import"./QSkeleton.d8507126.js";import"./QBadge.cb8db555.js";import"./vue-i18n.esm-bundler.e5a16dbd.js";import"./index.2f026771.js";import"./QBtnDropdown.41a9457c.js";import"./QMenu.8a4718ad.js";import"./QDate.59abae0b.js";import"./use-render-cache.3aae9b27.js";import"./ClosePopup.034ffd88.js";import"./QScrollArea.ec251a08.js";import"./QResizeObserver.988c698f.js";import"./QScrollObserver.bf79761e.js";import"./touch.9135741d.js";import"./QItemLabel.b302d2e1.js";import"./QTabs.a9c1b64a.js";import"./rtl.276c3f1b.js";import"./QExpansionItem.ec578cd9.js";import"./QImg.7d3e6d1d.js";import"./IndexPage.75cfb3f1.js";import"./QPagination.de182206.js";import"./QSelect.1740ff4d.js";import"./QChip.2708c0c7.js";import"./QTabPanels.aa3c86a4.js";import"./index.43b0bc22.js";import"./useAvatarUploader.88af71b4.js";import"./grid.65269509.js";import"./plugin-vue_export-helper.21dcd24c.js";var rt="data:image/png;base64,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";const it={class:"kt-about-me"},lt={class:"kt-about-me__header"},st={class:"kt-about-me__content"},ut={key:0,class:"kt-about-me__stub-wr"},ct={class:"kt-about-me__editor-wrapper"},dt={class:"d-flex justify-center items-center q-mt-md"},Wt=V({__name:"KtAboutMe",setup(mt){const p=q(),{content:r,editor:P,editorId:X}=H(p),{CAN_EDIT:y}=H(Z()),v=n(()=>`id${X.value}`),f=n(()=>{var t;return(t=r.value)!=null&&t.html?"read":"stub"}),U=n(()=>{var t;return((t=r.value)==null?void 0:t.additionalParams.POST.DETAIL_TEXT)||""}),_=n(()=>{const t=r.value,e=t==null?void 0:t.additionalParams.POST.UF_RENDERED;return e?{html:e.CONTENT,assets:{js:e.JS,css:e.CSS,string:[]}}:null}),R=n(()=>{const t=r.value,e=t==null?void 0:t.additionalParams.POST.UF;return e!=null&&e.UF_BLOG_POST_FILE?{UF_BLOG_POST_FILE:{USER_TYPE_ID:"disk_file",FIELD_NAME:"UF_BLOG_POST_FILE[]",VALUE:e.UF_BLOG_POST_FILE.VALUE?[...e.UF_BLOG_POST_FILE.VALUE]:[]}}:{}}),u=l(f.value),I=n(()=>u.value==="read"),Y=n(()=>u.value==="edit"),W=n(()=>u.value==="stub"),i=l(),c=l(),h=l(!0),L=l(!1);function w(t){u.value=t}function F(){return window.LHEPostForm||null}function J(){var t;return((t=F())==null?void 0:t.getEditor(v.value))||null}function Q(){var t;return((t=F())==null?void 0:t.getHandler(v.value))||null}async function M(){h.value=!0,w("edit"),await p.loadEditor(),P.value&&(L.value?N():E(P.value,c.value).then(async()=>{L.value=!0,await et();const t=window.BX,e=Q();e&&(t.onCustomEvent(e.eventNode,"OnShowLHE",[!0]),N())}))}async function z(){const t=J();if(t===null)return!1;try{if(c.value){const e=window.BX,d=new FormData,T=e.ajax.prepareForm(c.value);d.append("data[text]",t.GetContent());for(const g in T.data)if(g){const C=`data[additionalData][${g}]`,B=T.data[g];Array.isArray(B)?B.forEach(K=>{d.append(`${C}[]`,String(K))}):d.append(C,B)}await p.send(d),w(f.value)}}catch{}}function G(){w(f.value)}function N(){var t;(t=F())==null||t.reinitData(v.value,U.value,R.value),h.value=!1}return j([r,i],async()=>{i.value&&(r.value&&await E(r.value,i.value),_.value&&await E(_.value,i.value,!1))},{immediate:!0,deep:!0}),(t,e)=>(m(),b(o(nt),null,{default:O(()=>[a("div",it,[a("header",lt,[s(o(at),{text:t.$t("aboutMe.title")},null,8,["text"]),I.value&&o(y)?(m(),b(o(A),{key:0,theme:"tertiary",round:"",dense:"",onClick:M},{default:O(()=>e[1]||(e[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",fill:"none"},[a("path",{fill:"currentColor",d:"M16.335 3.834a2.275 2.275 0 0 0-3.214 0L2.92 14.037A3.116 3.116 0 0 0 2 16.254v1.288a.627.627 0 0 0 .627.627h1.288a3.115 3.115 0 0 0 2.218-.918L16.335 7.048a2.275 2.275 0 0 0 0-3.214Zm-11.09 12.53c-.353.351-.831.55-1.33.55h-.66v-.66a1.87 1.87 0 0 1 .551-1.33l7.743-7.743 1.442 1.443-7.745 7.74ZM15.449 6.161l-1.572 1.573-1.443-1.44 1.573-1.573a1.019 1.019 0 1 1 1.44 1.443l.002-.003Z"})],-1)])),_:1})):k("",!0)]),a("div",st,[W.value?(m(),$("div",ut,[s(o(ot),{icon:o(rt),text:t.$t("aboutMe.description")},null,8,["icon","text"]),s(o(A),{theme:"primary",label:t.$t("aboutMe.btn"),onClick:M},null,8,["label"])])):k("",!0),D(a("div",{ref_key:"contentElement",ref:i,class:"kt-about-me__content"},null,512),[[S,I.value]]),D(a("div",ct,[h.value?(m(),b(tt,{key:0})):k("",!0),e[0]||(x(-1),(e[0]=a("form",{ref_key:"editorElement",ref:c,class:"kt-about-me__editor"},null,512)).cacheIndex=0,x(1),e[0]),a("div",dt,[s(o(A),{theme:"primary",label:t.$t("aboutMe.btnSave"),onClick:z},null,8,["label"]),s(o(A),{theme:"ghost",label:t.$t("aboutMe.btnCancel"),onClick:G},null,8,["label"])])],512),[[S,Y.value]])])])]),_:1}))}});export{Wt as default};
