import{a as H,Q as W,b as Z}from"./QItemLabel.b302d2e1.js";import{Q as G}from"./QList.41df81dd.js";import{L as S,c as h,x as l,R as m,e as n,ae as E,S as p,V as e,ad as $,r as P,y as f,aF as M,z as r,F as w,U as I,af as U,N as B,aO as A,i as J,aP as ee,$ as b,dQ as te,aL as oe,Y as se,c1 as ae,a0 as le,av as Q,aG as ne}from"./index.a1748043.js";import{C as re}from"./ClosePopup.034ffd88.js";import{c as ie}from"./colors.85fc653d.js";import{u as ue}from"./vue-i18n.esm-bundler.e5a16dbd.js";import{u as pe}from"./useMenu.f7fa8a96.js";import{_ as de,a as ce}from"./KtAvatarUploaderSkeleton.vue_vue_type_style_index_0_lang.d403661f.js";import{Q as K}from"./QSkeleton.d8507126.js";import{a as _e,_ as me}from"./KtPersonalInfoUser.39082422.js";import{Q as fe}from"./QScrollArea.ec251a08.js";import{_ as V}from"./KtButton.5c4817ba.js";import{Q as ge}from"./QImg.7d3e6d1d.js";import{Q as ve}from"./QPopupProxy.64a89f3e.js";import{Q as D,a as O,b as R}from"./QCarousel.aec78e40.js";import{_ as L}from"./KtViewCounter.d7f8eb76.js";import{_ as ke}from"./KtIconSkeleton.6843b24f.js";import"./useAvatarUploader.88af71b4.js";import"./KtWidgetLayoutRow.7ad5d39d.js";import"./KtWidgetLayoutText.4eb60d33.js";import"./KtLink.5d7d273c.js";import"./KtUserCardSkeleton.a94624ce.js";import"./QMenu.8a4718ad.js";import"./QResizeObserver.988c698f.js";import"./QScrollObserver.bf79761e.js";import"./touch.9135741d.js";import"./QBtnDropdown.41a9457c.js";import"./QTabPanels.aa3c86a4.js";import"./use-render-cache.3aae9b27.js";import"./QTabs.a9c1b64a.js";import"./rtl.276c3f1b.js";import"./QBadge.cb8db555.js";import"./index.2f026771.js";import"./QDate.59abae0b.js";import"./QExpansionItem.ec578cd9.js";import"./IndexPage.75cfb3f1.js";import"./QPagination.de182206.js";import"./QSelect.1740ff4d.js";import"./QChip.2708c0c7.js";import"./index.43b0bc22.js";import"./plugin-vue_export-helper.21dcd24c.js";const q=S({__name:"KtBadgesItem",props:{image:{},color:{}},setup(d){const o=d,s=h(()=>`background: ${o.color}`);return(t,a)=>(l(),m("span",{class:"kt-badges-item",style:E(s.value)},[n(ge,{src:o.image,"initial-ratio":"1",ratio:"1"},null,8,["src"])],4))}});const be={class:"kt-badges-detail"},he={class:"kt-badges-detail__left"},ye={class:"kt-badges-detail__right"},$e={class:"kt-badges-detail__name"},Se=["innerHTML"],Ve={class:"kt-badges-detail__date"},z=S({__name:"KtBadgesDetail",props:{badge:{}},setup(d){const o=d;return(s,t)=>(l(),m("article",be,[p("div",he,[n(e(q),{image:o.badge.image,color:o.badge.color,class:"kt-badges-detail__image"},null,8,["image","color"])]),p("div",ye,[p("h3",$e,$(o.badge.name),1),p("p",{class:"kt-badges-detail__description",innerHTML:o.badge.description},null,8,Se),p("span",Ve,$(o.badge.date),1)])]))}});function we(d,o,s=0){const t=P(s),a=h(()=>Ce(d.value,o)),i=h(()=>d.value.length>o.value);return{slides:a,slideActive:t,slidesControlsVisible:i}}function Ce(d,o){const s=[];let t=0;for(;t<d.length;){const a=[];let i=t;for(;i<o.value+t;){const _=d[i];_!==void 0&&a.push(_),i++}s.push(a),t=i}return s}const xe={class:"kt-carousel__slide-inner"},Te=S({__name:"KtCarousel",props:{modelValue:{},slides:{},controlsVisible:{type:Boolean}},emits:["update:modelValue"],setup(d){const o=d;return(s,t)=>(l(),f(R,{"model-value":o.modelValue,swipeable:"",animated:"","transition-prev":"slide-right","transition-next":"slide-left",infinite:"",ref:"carousel",class:"kt-carousel","onUpdate:modelValue":t[2]||(t[2]=a=>s.$emit("update:modelValue",a))},M({default:r(()=>[(l(!0),m(w,null,I(o.slides,(a,i)=>(l(),f(O,{key:i,name:i,class:"kt-carousel__slide"},{default:r(()=>[p("div",xe,[U(s.$slots,"default",{slide:a})])]),_:2},1032,["name"]))),128))]),_:2},[o.controlsVisible?{name:"control",fn:r(()=>[n(D,{position:"bottom-left",offset:[0,0],class:"kt-carousel__control"},{default:r(()=>[n(e(L),{theme:"secondary",round:"",dense:"",class:"kt-carousel__button-prev",onClick:t[0]||(t[0]=a=>s.$refs.carousel.previous())},{default:r(()=>t[3]||(t[3]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none"},[p("path",{fill:"currentColor",d:"m6.25 10 6.25-6.25.875.875L8 10l5.375 5.375-.875.875L6.25 10Z"})],-1)])),_:1}),n(e(L),{theme:"secondary",round:"",dense:"",class:"kt-carousel__button-next",onClick:t[1]||(t[1]=a=>s.$refs.carousel.next())},{default:r(()=>t[4]||(t[4]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none"},[p("path",{fill:"currentColor",d:"M13.75 10 7.5 16.25l-.875-.875L12 10 6.625 4.625 7.5 3.75 13.75 10Z"})],-1)])),_:1})]),_:1})]),key:"0"}:void 0]),1032,["model-value"]))}});S({__name:"KtCarouselSkeleton",props:{modelValue:{},slides:{},controlsVisible:{type:Boolean}},setup(d){const o=d;return(s,t)=>(l(),f(R,{"model-value":o.modelValue,class:"kt-carousel-skeleton","onUpdate:modelValue":t[0]||(t[0]=a=>s.$emit("update:modelValue",a))},M({default:r(()=>[(l(!0),m(w,null,I(o.slides,(a,i)=>(l(),f(O,{key:i,name:i,class:"kt-carousel__slide"},{default:r(()=>[p("div",{ref_for:!0,ref:"slideInnerRef"},[U(s.$slots,"default",{slide:a})],512)]),_:2},1032,["name"]))),128))]),_:2},[o.controlsVisible?{name:"control",fn:r(()=>[n(D,{position:"bottom-left",offset:[0,0],class:"kt-carousel-skeleton__control"},{default:r(()=>[n(K,{type:"QBtn",size:"10px"}),n(K,{type:"QBtn",size:"10px"})]),_:1})]),key:"0"}:void 0]),1032,["model-value"]))}});const Be={class:"kt-popup-outer"},Pe={class:"kt-popup-inner"},Ie={class:"kt-popup__close-btn-wrapper"},Qe={class:"kt-popup__title"},Ne=S({__name:"KtBadgesDetailPopup",setup(d){const{badges:o}=B(A()),s=P(4),{slideActive:t,slides:a,slidesControlsVisible:i}=we(o,s),_=P(!1),C=()=>{_.value=!1};return(x,u)=>(l(),f(ve,{modelValue:_.value,"onUpdate:modelValue":u[1]||(u[1]=v=>_.value=v),anchor:"top right",self:"center left",offset:[15,0],"max-width":"545px",breakpoint:600,class:"kt-popup kt-popup--proxy kt-badges-detail-popup"},{default:r(()=>[p("div",Be,[p("div",Pe,[p("div",Ie,[n(e(V),{theme:"text",round:"",size:"6px",icon:"kt:close",color:"app-grey-6",class:"kt-popup__close-btn",onClick:C})]),p("h2",Qe,$(x.$t("badges.popup.title")),1),n(e(Te),{modelValue:e(t),"onUpdate:modelValue":u[0]||(u[0]=v=>J(t)?t.value=v:null),slides:e(a),"controls-visible":e(i),class:"q-mt-sm"},{default:r(({slide:v})=>[(l(!0),m(w,null,I(v,k=>(l(),f(e(z),{key:k.name,badge:k},null,8,["badge"]))),128))]),_:1},8,["modelValue","slides","controls-visible"])])])]),_:1},8,["modelValue"]))}});const Ee={key:0,class:"kt-badges"},Ke=S({__name:"KtBadges",setup(d){const{badges:o}=B(A()),s=h(()=>o.value.slice(0,4)),t=h(()=>s.value.length>0),a=h(()=>{const u={self:"top left"};return ee.gt.sm?(u.anchor="top right",u.offset=[15,0]):(u.anchor="bottom left",u.offset=[0,15]),u}),i=P(null),_=P(!1),C=u=>{i.value=u,_.value=!0},x=()=>{i.value=null,_.value=!1};return(u,v)=>t.value?(l(),m("div",Ee,[(l(!0),m(w,null,I(s.value,(k,y)=>(l(),m("div",{key:k.name,class:"kt-badges__item-wrapper"},[n(e(q),{image:k.image,color:k.color,style:E({"z-index":e(o).length-y}),onClick:g=>C(y),onMouseleave:x},null,8,["image","color","style","onClick"]),i.value==y?(l(),f(fe,{key:0,modelValue:_.value,"onUpdate:modelValue":v[0]||(v[0]=g=>_.value=g),anchor:a.value.anchor,self:a.value.self,offset:a.value.offset,"max-width":"600px",class:"kt-tooltip kt-badges__tooltip"},{default:r(()=>[n(e(z),{badge:k},null,8,["badge"])]),_:2},1032,["modelValue","anchor","self","offset"])):b("",!0)]))),128)),e(o).length>4?(l(),f(e(V),{key:0,round:"",label:"...",class:"kt-badges__btn kt-badges-item"},{default:r(()=>[n(e(Ne))]),_:1})):b("",!0)])):b("",!0)}});const Le={class:"kt-personal-photo"},Me={class:"flex items-center justify-between q-mb-md"},Ue={class:"kt-personal-photo__avatar-wrapper relative-position q-mx-auto"},Ae={key:0,class:"kt-personal-photo__current-vacation"},De={key:2,class:"kt-personal-photo__btn"},Bt=S({__name:"KtPersonalPhoto",setup(d){const o=te(),{STATUS:s,ONLINE_STATUS:t}=B(oe()),{CAN_EDIT:a,IS_OWN_PROFILE:i,SHOW_SONET_ADMIN:_,EDIT_DEPUTY:C}=B(se()),{VACATION:x,VACATION_FORMATTED:u,USERS:v}=B(ae()),{t:k}=ue(),{menu:y}=pe(),{getPaletteColor:g}=ie,F=h(()=>!!s.value&&(!(s.value==="employee"&&(i.value||!a.value))||_.value)),N=h(()=>{const c={text:k(`personalPhoto.status.${s.value}`),color:g("white"),background:""};switch(s.value){case"admin":c.background=g("primary");break;case"integrator":c.background=g("app-blue-2");break;case"extranet":c.background=g("app-orange-1");break;case"fired":c.background=g("app-grey-8");break;case"invited":c.background=g("app-green-1");break;case"email":case"shop":case"visitor":c.background=g("app-grey-5");break;case"employee":c.color=g("app-grey-5"),c.background="transparent";break}return c}),X=h(()=>({color:N.value.color,backgroundColor:N.value.background,cursor:a.value?"pointer":""})),j=()=>{window.BX.ready(function(){window.BXIM.openMessenger(o.params.id)})},Y=()=>{window.BX.ready(function(){window.BXIM.callTo(o.params.id)})};return(c,Oe)=>(l(),m("div",Le,[p("div",Me,[F.value?(l(),f(e(V),{key:0,theme:"none",label:N.value.text,dropdown:e(a)&&e(y).length>0,style:E(X.value),class:"kt-personal-photo__admin-menu-btn"},{default:r(()=>[e(y).length>0?(l(),f(G,{key:0},{default:r(()=>[(l(!0),m(w,null,I(e(y),T=>le((l(),f(H,{key:T.text,clickable:"",onClick:T.handler},{default:r(()=>[n(W,null,{default:r(()=>[n(Z,null,{default:r(()=>[Q($(T.text),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[re]])),128))]),_:1})):b("",!0)]),_:1},8,["label","dropdown","style"])):b("",!0),n(e(de),{"is-online":e(t).IS_ONLINE,text:e(t).STATUS_TEXT,class:"kt-personal-photo__status q-ml-auto"},null,8,["is-online","text"])]),p("div",Ue,[n(e(ce),{class:"q-mx-auto"}),n(e(Ke))]),e(u)?(l(),m("div",Ae,[n(e(ke),{name:"kt:palm",color:"white",size:"lg","background-color":"app-orange-3"}),n(e(_e),{label:c.$t("personalPhoto.currentVacationLabel"),content:e(u),class:"q-mb-none"},null,8,["label","content"])])):b("",!0),e(i)||e(u)?(l(),m(w,{key:1},[n(ne,{color:"app-grey-15",class:"q-mt-md"}),n(e(me),{label:`${c.$t("personalPhoto.replacementStaff")}:`,user:e(x).DEPUTY.map(T=>e(v)[T]),justify:"center","class-list":"content-flex",multiple:"",class:"column justify-center q-mb-none replacement-staff"},{footer:r(()=>[e(C)?(l(),f(e(V),{key:0,href:"/lk/deputy/",theme:"primary",unelevated:"",rounded:"",style:{"margin-top":"15px"}},{default:r(()=>[Q($(c.$t("personalPhoto.replacementStaffAdd")),1)]),_:1})):b("",!0)]),_:1},8,["label","user"])],64)):b("",!0),e(i)?b("",!0):(l(),m("div",De,[n(e(V),{onClick:j,class:"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round"},{default:r(()=>[Q($(c.$t("personalPhoto.chatMessage")),1)]),_:1}),n(e(V),{onClick:Y,class:"ui-btn ui-btn-sm ui-btn-light-border ui-btn-round"},{default:r(()=>[Q($(c.$t("personalPhoto.videoCall")),1)]),_:1})]))]))}});export{Bt as default};
