import{dY as S,c as F,r as M,L as Q,N as P,Y as U,x as s,y as c,aF as q,V as e,z as l,e as d,av as _,ad as y,R as p,F as k,U as g,$ as C,aB as Y,i as R,aI as b,aG as H,S as K}from"./index.a1748043.js";import{Q as O}from"./QMenu.8a4718ad.js";import{u as j,_ as I}from"./KtTag.109e9cf4.js";import{a as z}from"./KtWidgetLayoutSkeleton.d2d36770.js";import{_ as A}from"./KtWidgetLayoutStubSkeleton.vue_vue_type_style_index_0_lang.2b6c8a5f.js";import"./QSkeleton.d8507126.js";import{_ as G}from"./KtWidgetLayoutText.4eb60d33.js";import{_ as T}from"./KtButton.5c4817ba.js";import"./QImg.7d3e6d1d.js";import"./QChip.2708c0c7.js";import"./KtUserCardSkeleton.a94624ce.js";import"./KtIconSkeleton.6843b24f.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnDropdown.41a9457c.js";import"./colors.85fc653d.js";function J($,a){const r=S(),i=F(()=>r.items.length?"read":"stub"),v=M(i.value),u=n=>{v.value=n};return{mode:v,changeMode:u,add:async()=>{const n=[...$.value];a.value!==""&&n.push(a.value),await r.add(n),$.value=[],a.value="",u(i.value)},remove:async n=>{await r.removeOld(n),r.items.length===0&&u(i.value)},cancel:()=>{$.value=[],u(i.value)},search:n=>{r.loadTips(n)}}}const W={key:0,class:"kt-competencies__items"},X={key:2,class:"full-width"},Z={class:"q-my-md"},ee={class:"d-flex justify-center items-center q-gutter-md"},_e=Q({__name:"KtCompetencies",setup($){const{newTagModel:a,preparedTags:r,isHintPopupVisible:i,addPrepared:v,removePrepared:u,showHintPopup:E}=j(),{mode:f,changeMode:x,add:V,remove:n,cancel:B,search:N}=J(r,a),{items:h,tips:w}=P(S()),{CAN_EDIT:D}=P(U());return(m,o)=>(s(),c(e(z),{title:m.$t("competencies.title"),"padding-bottom":"30px",class:"kt-competencies"},q({default:l(()=>[e(f)==="read"?(s(),p("div",W,[(s(!0),p(k,null,g(e(h),t=>(s(),c(e(T),{key:t.ID,href:`/company?apply_filter=Y&UF_COMPETENCE=${t.ID}`,theme:"info",outline:"",class:"kt-competencies__item"},{default:l(()=>[_(y(t.TITLE),1)]),_:2},1032,["href"]))),128))])):C("",!0),e(f)==="stub"?(s(),c(e(A),{key:1,icon:"kt:competencies",text:m.$t("competencies.stub.description"),"btn-text":m.$t("competencies.stub.btn"),onClick:o[1]||(o[1]=t=>e(x)("edit"))},null,8,["text","btn-text"])):C("",!0),e(f)==="edit"?(s(),p("div",X,[d(Y,{modelValue:e(a),"onUpdate:modelValue":o[3]||(o[3]=t=>R(a)?a.value=t:null),modelModifiers:{trim:!0},outlined:"",class:"kt-prepared-tags",onKeydown:[o[4]||(o[4]=b(t=>e(v)(),["space"])),b(e(V),["enter"]),o[5]||(o[5]=b(t=>e(u)(),["delete"])),o[6]||(o[6]=t=>e(E)())],onKeyup:o[7]||(o[7]=t=>e(N)(e(a))),onChange:o[8]||(o[8]=t=>e(N)(e(a)))},{default:l(()=>[(s(!0),p(k,null,g(e(r),t=>(s(),c(e(I),{key:t,text:t,removable:"",onRemoveTag:L=>e(u)(t)},null,8,["text","onRemoveTag"]))),128)),d(O,{modelValue:e(i),"onUpdate:modelValue":o[2]||(o[2]=t=>R(i)?i.value=t:null),"no-focus":"",class:"kt-prepared-tags__popup"},{default:l(()=>[e(w).length>0?(s(),p(k,{key:0},[(s(!0),p(k,null,g(e(w),t=>(s(),c(e(I),{key:t.TITLE,text:t.TITLE,onClick:L=>e(v)(t.TITLE)},null,8,["text","onClick"]))),128)),d(H,{color:"app-grey-15",class:"q-my-lg"})],64)):C("",!0),d(e(G),{color:"app-grey-5"},{default:l(()=>[_(y(m.$t("competencies.popup.description")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onKeydown"]),K("div",Z,[(s(!0),p(k,null,g(e(h),t=>(s(),c(e(I),{key:t.ID,text:t.TITLE,removable:"",onRemoveTag:L=>e(n)(t)},null,8,["text","onRemoveTag"]))),128))]),K("div",ee,[d(e(T),{theme:"primary",onClick:e(V)},{default:l(()=>[_(y(m.$t("competencies.add")),1)]),_:1},8,["onClick"]),d(e(T),{theme:"text",onClick:e(B)},{default:l(()=>[_(y(m.$t("competencies.cancel")),1)]),_:1},8,["onClick"])])])):C("",!0)]),_:2},[e(f)==="read"&&e(D)?{name:"title-suffix",fn:l(()=>[d(e(T),{theme:"text",onClick:o[0]||(o[0]=t=>e(x)("edit"))},{default:l(()=>[_(y(m.$t("competencies.edit")),1)]),_:1})]),key:"0"}:void 0]),1032,["title"]))}});export{_e as default};
