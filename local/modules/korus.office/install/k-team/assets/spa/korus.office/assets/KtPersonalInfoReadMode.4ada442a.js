import{Q as L}from"./QExpansionItem.ec578cd9.js";import{r as G,c as W,L as Z,aM as j,N as D,Y as J,aL as M,x as o,R as u,S as R,V as n,y as v,z as g,av as w,$ as C,e as r,F as d,U as V,aD as $,W as b,i as O,aG as f,ad as X,al as ee,Q as te,K as m,c5 as x,e1 as Y,c6 as ae}from"./index.a1748043.js";import{_ as N,a as B,b as ne,c as oe,d as se,e as re}from"./KtPersonalInfoUser.39082422.js";import{_ as le}from"./KtStructureSkeleton.01bc7269.js";import{_ as q}from"./KtButton.5c4817ba.js";import"./QItemLabel.b302d2e1.js";import"./KtWidgetLayoutRow.7ad5d39d.js";import"./KtWidgetLayoutText.4eb60d33.js";import"./KtLink.5d7d273c.js";import"./KtUserCardSkeleton.a94624ce.js";import"./QImg.7d3e6d1d.js";import"./QSkeleton.d8507126.js";import"./QMenu.8a4718ad.js";import"./QBtnDropdown.41a9457c.js";import"./colors.85fc653d.js";function ue(y){const c=G(y.defaultValue),i=()=>{c.value=!c.value},A=W(()=>c.value?y.expandedText:y.expandText);return{isExpanded:c,toggle:i,expandStateText:A}}const me={class:"kt-personal-info-read-mode"},ce={class:"row full-width"},ie={class:"column col-xs-12 xl-inline-block col-xl-7 q-space relative-position"},pe={class:"col-xs-12 xl-inline-block col-xl-4 q-space"},Ce=Z({__name:"KtPersonalInfoReadMode",emits:["change-mode"],setup(y){const c=j(),{FIELDS:i}=D(c),{CAN_EDIT:A}=D(J());D(M());const p=M(),{isExpanded:l,toggle:z,expandStateText:K}=ue({defaultValue:!1,expandText:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435",expandedText:"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C"}),P=["NAME","LAST_NAME","SECOND_NAME","PERSONAL_PHOTO"],U=function(a,t){return a.sort.value>t.sort.value?1:a.sort.value<t.sort.value?-1:0},Q=i.value.filter(a=>a.sort.type==="M"&&!P.includes(a.name)).sort(U),H=i.value.filter(a=>a.sort.type==="A"&&!P.includes(a.name)).sort(U),I=a=>{const t=i.value.find(e=>a===e.name);return t==null?void 0:t.management},T=a=>{const t=i.value.find(e=>a===e.name);return t==null?void 0:t.managementStatus},F=a=>{switch(a.type){case"link":return m(re);case"phone":return m(se);case"userField":return a.name==="UF_WORKPLACE"?m(ne):a.name==="UF_MESSENGERS"?m(oe):a.data.fieldInfo.USER_TYPE_ID==="employee"?m(N):m(B);default:return m(B)}},k=a=>{const t=p.$state[a.name];switch(a.type){case"datetime":return a.name==="PERSONAL_BIRTHDAY"?p.$state.PERSONAL_BIRTHDAY_FORMATTED:t?Y(new Date(String(t))):x;case"multilist":return typeof t=="object"&&t!==null?a.data.items.filter(s=>t.indexOf(parseInt(s.VALUE))!==-1).map(s=>s.NAME).join(", "):null;case"list":{const e=a.data.items.find(s=>String(s.VALUE)===String(t));return t?(e==null?void 0:e.NAME)||x:a.data.items[0].NAME}case"timezone":return ae({autoTimeZone:p.$state.AUTO_TIME_ZONE,timeZone:String(t)});case"userField":return a.data.fieldInfo.USER_TYPE_ID==="boolean"?t?"\u0414\u0430":"\u041D\u0435\u0442":a.data.fieldInfo.USER_TYPE_ID==="date"?t?Y(new Date(String(t))):x:a.data.fieldInfo.USER_TYPE_ID==="employee"||a.name==="UF_MESSENGERS"||a.name==="UF_WORKPLACE"?t:t?String(t):x;default:return t?String(t):x}},h=a=>{const t=p.$state[a.name],e=a.type==="userField"&&a.data.fieldInfo.USER_TYPE_ID==="boolean";return t||e?"primary":"app-grey-5"};return(a,t)=>(o(),u("div",me,[R("div",ce,[R("div",ie,[n(A)?(o(),v(n(q),{key:0,theme:"text",class:"q-ml-auto kt-personal-info-read-mode__change-mode-btn",onClick:t[0]||(t[0]=e=>a.$emit("change-mode","edit"))},{default:g(()=>t[3]||(t[3]=[w(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C ")])),_:1})):C("",!0),r(L,{modelValue:n(l),"onUpdate:modelValue":t[1]||(t[1]=e=>O(l)?l.value=e:null),"expand-icon-toggle":"",class:"kt-personal-info-read-mode__show-more"},{header:g(()=>[(o(!0),u(d,null,V(n(Q),e=>{var s,_,E,S;return o(),u(d,{key:e.name},[n($)(n(p).$state[e.name])?C("",!0):(o(),u(d,{key:0},[((_=(s=e==null?void 0:e.data)==null?void 0:s.fieldInfo)==null?void 0:_.USER_TYPE_ID)==="employee"?(o(),v(n(N),{key:0,label:e.title,user:k(e),color:h(e),multiple:((S=(E=e==null?void 0:e.data)==null?void 0:E.fieldInfo)==null?void 0:S.MULTIPLE)==="Y",private:I(e.name),hidden:T(e.name),"field-code":e.name,"class-list":"w-100"},null,8,["label","user","color","multiple","private","hidden","field-code"])):(o(),v(b(F(e)),{key:1,label:e.title,content:k(e),color:h(e),private:I(e.name),hidden:T(e.name),"field-code":e.name},null,8,["label","content","color","private","hidden","field-code"]))],64))],64)}),128))]),default:g(()=>[(o(!0),u(d,null,V(n(H),e=>{var s,_,E,S;return o(),u(d,{key:e.name},[n($)(n(p).$state[e.name])?C("",!0):(o(),u(d,{key:0},[((_=(s=e==null?void 0:e.data)==null?void 0:s.fieldInfo)==null?void 0:_.USER_TYPE_ID)==="employee"?(o(),v(n(N),{key:0,label:e.title,user:k(e),color:h(e),multiple:((S=(E=e==null?void 0:e.data)==null?void 0:E.fieldInfo)==null?void 0:S.MULTIPLE)==="Y",private:I(e.name),hidden:T(e.name),"field-code":e.name,"class-list":"w-100"},null,8,["label","user","color","multiple","private","hidden","field-code"])):(o(),v(b(F(e)),{key:1,label:e.title,content:k(e),color:h(e),private:I(e.name),hidden:T(e.name),"field-code":e.name},null,8,["label","content","color","private","hidden","field-code"]))],64))],64)}),128))]),_:1},8,["modelValue"])]),r(f,{vertical:"",color:"app-grey-15",class:"kt-personal-info-read-mode__vertical-separator"}),r(f,{color:"app-grey-15",class:"kt-personal-info-read-mode__horizontal-separator"}),R("div",pe,[r(L,{modelValue:n(l),"onUpdate:modelValue":t[2]||(t[2]=e=>O(l)?l.value=e:null),"expand-icon-toggle":"",class:"kt-personal-info-read-mode__show-more"},{header:g(()=>[r(n(le))]),_:1},8,["modelValue"])])]),r(f,{class:"q-my-xs full-width",color:"app-grey-15"}),R("footer",{class:te(["q-pt-sm full-width",n(l)?"is-expanded":""])},[r(n(q),{theme:"text",color:"primary",class:"kt-show-more-btn",onClick:n(z)},{default:g(()=>[w(X(n(K))+" ",1),r(ee,{name:"kt:chevron-down"})]),_:1},8,["onClick"])],2)]))}});export{Ce as default};
