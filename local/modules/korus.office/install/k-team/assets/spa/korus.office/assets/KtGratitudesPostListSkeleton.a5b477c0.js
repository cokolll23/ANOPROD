import{Q as b}from"./QSkeleton.d8507126.js";import{c2 as P,c as v,e0 as L,L as O,N as C,Y as h,x as o,R as n,F as m,U as g,e as f,V as e,S as k,$ as S,ad as y}from"./index.a1748043.js";import{b as G}from"./index.43b0bc22.js";import N from"./KtGratitudesItem.b8d82bf0.js";import I from"./KtGratitudesItemSkeleton.35d8d042.js";import{u as w,_ as T}from"./KtGratitudesPostItem.fb1bb451.js";import R from"./KtGratitudesPostItemSkeleton.db5051cb.js";function K(){const u=P();return{gratitudes:v(()=>u.BADGES.map(t=>{var l,s,_;const a=L.find(p=>p.CODE===t.CODE),r=(_=(s=((l=u.BADGES_COUNTERS)!=null?l:{})[t.ID])==null?void 0:s.COUNT)!=null?_:0;return typeof a=="undefined"?Object.assign({},t):Object.assign({},t,a,{COUNT:r,ICON_COLOR:r>0?a.ICON_COLOR:"app-grey-9"})}).sort((t,a)=>Number(t.SORT)-Number(a.SORT))),openGratitudePage:t=>{const a=window.BX,{width:r}=G(),l=typeof t!="undefined"?u.URLS.LIST+`&gratCode=${t}`:u.URLS.ADD,s=new URLSearchParams(l).get("gratUserId"),_=typeof t!="undefined"?{width:1e3}:{cacheable:!1,data:{entityType:"gratPost",entityId:s},width:1e3};r.value>768?a.SidePanel.Instance.open(l,_):window.location.href=l}}}const $={class:"kt-gratitudes-list"},U=O({__name:"KtGratitudesList",setup(u){const{IS_OWN_PROFILE:d}=C(h()),{gratitudes:c,openGratitudePage:t}=K(),a=r=>{d.value||t(r)};return(r,l)=>(o(),n("ul",$,[(o(!0),n(m,null,g(e(c),s=>(o(),n("li",{key:s.CODE,class:"kt-gratitudes-list__item"},[f(e(N),{icon:s.ICON,"is-active":s.COUNT>0,count:s.COUNT,color:s.ICON_COLOR,onClick:_=>a(s.CODE)},null,8,["icon","is-active","count","color","onClick"])]))),128))]))}});var J=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));const D={class:"kt-gratitudes-list-skeleton"},j=O({__name:"KtGratitudesListSkeleton",setup(u){return(d,c)=>(o(),n("ul",D,[(o(),n(m,null,g(14,t=>k("li",{key:t,class:"kt-gratitudes-list-skeleton__item"},[f(e(I))])),64))]))}});var Z=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));const x={key:0,class:"kt-gratitudes-post-list"},E={class:"kt-gratitudes-post-list__actions"},B=["disabled"],M=["disabled"],z=O({__name:"KtGratitudesPostList",setup(u){const{gratitudePosts:d,gratitudePostsLoading:c,canLoadMorePosts:t,canLoadPreviousPosts:a,loadMorePosts:r,loadPreviousPosts:l}=w(),s=v(()=>d.value.length);return(_,p)=>(o(),n(m,null,[s.value?(o(),n("ul",x,[(o(!0),n(m,null,g(e(d),i=>(o(),n("li",{key:i.ID,class:"kt-gratitudes-post-list__item"},[f(e(T),{title:i.TITLE,url:i.URL,datetime:i.DATE_PUBLISH,icon:i.ICON,"icon-color":i.ICON_COLOR,sender:i.SENDER},null,8,["title","url","datetime","icon","icon-color","sender"])]))),128))])):S("",!0),k("div",E,[e(a)?(o(),n("button",{key:0,type:"button",disabled:e(c),class:"kt-gratitudes-post-list__show-previous-btn",onClick:p[0]||(p[0]=(...i)=>e(l)&&e(l)(...i))},y(_.$t("gratitudes.showPreviousBtn")),9,B)):S("",!0),e(t)?(o(),n("button",{key:1,type:"button",disabled:e(c),class:"kt-gratitudes-post-list__show-more-btn",onClick:p[1]||(p[1]=(...i)=>e(r)&&e(r)(...i))},y(_.$t("gratitudes.showMoreBtn")),9,M)):S("",!0)])],64))}});var tt=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));const V={class:"kt-gratitudes-post-list-skeleton"},F=O({__name:"KtGratitudesPostListSkeleton",setup(u){return(d,c)=>(o(),n(m,null,[k("ul",V,[(o(),n(m,null,g(5,t=>k("li",{key:t,class:"kt-gratitudes-post-list-skeleton__item"},[f(e(R))])),64))]),f(b,{type:"QBtn",width:"100px",height:"14px",class:"kt-gratitudes-post-list-skeleton__show-more-btn"})],64))}});var et=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{J as K,U as _,z as a,j as b,F as c,Z as d,tt as e,et as f,K as u};
