import{c4 as Q,w as O,c as l,r as H,L as P,N as X,Y as j,x as r,y as m,z as R,S as d,e as v,V as t,$ as h,R as T,F as _,U as M,ad as G}from"./index.a1748043.js";import{_ as y,n as N}from"./KtViewCounter.d7f8eb76.js";import{_ as Y,c as S,a as L,K as F}from"./KtWidgetWrapper.6a945d5d.js";import"./QSkeleton.d8507126.js";import"./QBadge.cb8db555.js";import"./vue-i18n.esm-bundler.e5a16dbd.js";import"./index.2f026771.js";import"./QBtnDropdown.41a9457c.js";import"./QMenu.8a4718ad.js";import"./QDate.59abae0b.js";import"./use-render-cache.3aae9b27.js";import"./ClosePopup.034ffd88.js";import"./QScrollArea.ec251a08.js";import"./QResizeObserver.988c698f.js";import"./QScrollObserver.bf79761e.js";import"./touch.9135741d.js";import"./QItemLabel.b302d2e1.js";import"./QTabs.a9c1b64a.js";import"./rtl.276c3f1b.js";import"./QExpansionItem.ec578cd9.js";import"./QImg.7d3e6d1d.js";import"./IndexPage.75cfb3f1.js";import"./QPagination.de182206.js";import"./QSelect.1740ff4d.js";import"./QChip.2708c0c7.js";import"./QTabPanels.aa3c86a4.js";import"./index.43b0bc22.js";import"./useAvatarUploader.88af71b4.js";import"./grid.65269509.js";import"./plugin-vue_export-helper.21dcd24c.js";function K(i){const a=Q();O(i,async()=>{if(i.value!=="edit")return!1;await a.loadPopular()})}function z(i){const a=Q(),u=l(()=>a.INTERESTS.length?"read":"stub"),p=H(u.value);function A(n){p.value=n}async function k(n){const E=[...i.value];typeof n!="undefined"&&n!==""&&!E.includes(n)&&E.push(n),await a.add(E),i.value=[],A(u.value)}async function w(n){await a.remove(n)}function x(){i.value=[],A(u.value)}function f(n){n.length>0?a.loadTips(n):a.loadPopular()}return K(p),{mode:p,changeMode:A,add:k,remove:w,cancel:x,search:f}}var W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATHSURBVHgB7VtZqxxFGD0zN8aY6HUNapQYjCgBRRRXoiI+qoj6pA/6JD6LP8Bf4LMg6LOioP4AxYTsIWQhKyRkIftCdpLc5M5MzqGqMz1zp+9UVdfthfSBQ83c6Tszfep0fUvXAA0aNGhwF6OFktDr9RZweJ58nVxItu1Lv5FnW61WDwVgHgoGT1yiP0t+Tz414pAz5CEet5Ui3MQco3ABiCfJL+3YHfH6fBhndCjCbopwDXOINorHh+TLZCeD+k7z7DEfU4TF1jVzgjIEWAEz81lsW+qkHyLfJZ/GHKEMAR6HmwATlk+QH9EFK8jol2wZa4BmtjvL68nsJ0wEWUkqcmxDRJQhQGfM64kA7aHn95Pv0wX3ctzOxfEGIqAMAbpjXh/lgPTflTdIhNWIgCoLMHziCZU0vUUn3MNxfd4wWcYi2B3DKQyKkPX4FfJt5EQZAnTG8B/yCEwESEeE4cdaEFfSCe+Q8xGIyjmAllYqrOv7HGZ3QPJYLngRgajiJQCKcJ7DX+QOZDsgeTxJfkIXLEUAKimAQBEuc1hHHsVoB6SjhC4BXQqT8EQV14A7oAhXOfxNbsFMB0xg0A0vwSRLXqisAxJYEdaSJ5DtgKSAetWGR2dUXgDBivAnuQ8za4V2io+Sr8EDtRBAoAgXOKxCv2ROOyDthOU2XXZCpdeAYVCE4xzWkGqXpR2QdoJK58fgiNo4IIUDpCJElgMmLZ1QRwFOkaeRnRuoalwER1SxGBoH1QpqlmZVixPwmNgq9gPGQTXAfTAnKgxXi3p/Z5Hr6ABZ/EFkO0CNkuuub1ZHAZ4hlyDbAVfIS65vVkcBXoBpimQ54LylE2q1BtgE5w30V3xgpgP2+HSJ6uaAR2AWwKyeobAXHqibAMMlMTDogJ02W3RG3QRQPZCkwcMOuEVuhSeiCsBr9AEOb8K0qDQqJ9eCpeRFjY0j9jPV7vK+86trm5+xgQ/fw8wooJ7BJngimgD8YurSfma/nHLxdIGjz1kKcztccVoCqLRVyPLdB/A/uQzmFnvaARsokHP4S5D7rqud9c/J7zCYiU07jCdhhJi684VarZ8dPlOJ0DcwXSA5bDP/70cEIEYx9BX5Lfr3/MSO47gYxhUTcC+GYGf6F/IPUovefwhEsAPsndpPyR8weFIuM98beq7qTuGrx5P7FR6w9wRuhW6pyeMA7eL4AoOlbCdwfBjGyt4RQtto8uwnyiPA1+Rz6C900w5jN+N4/X0J4lySXgiKAnaHl8Kc78zPdvwieDQyYiE0DOrkk1Dnes2PWyN0zEIUjFABliHezKfHBSgYoQJo306smU+vDbURIInbsWY+fVyhCBVAbemYM588v4qCESqAEpfYM6/xIgpGqACqvGLOfDLuR8EITTyOwdygCM38RjlE9j+KghEkAFNPNR90t1bt59kyvFFj1nF7yMMoGHlSz43kLsTJBySoNj9OoWAEC2A3M/2E/qUQOvOy/r++vbxYyFV88EsrGvwO09gIjQpaUHegJOTuCAna0w9THS6HEXXcaq9RC+kWiljayQtRBBAogran6EcOH8AUSulZT1NJlMKd1hD9Nsi7BxAT0QRIQCGUJqsbrIaJenfq2OjE1Qg9Sx7kSU+jQYMGDRqUj9ucfb3YwPlPpwAAAABJRU5ErkJggg==";const $={class:"kt-interests"},Z={class:"kt-interests__header"},ee={class:"kt-interests__content"},te={key:0,class:"kt-interests__tags"},oe={key:0,class:"kt-interests__footer"},_e=P({__name:"KtInterests",setup(i){const a=H([]),{mode:u,changeMode:p,add:A,remove:k,cancel:w,search:x}=z(a),{INTERESTS:f,POPULAR:n}=X(Q()),{CAN_EDIT:E}=X(j()),J=l(()=>f.value.map(o=>o.TEXT)),b=l(()=>f.value.reduce((o,s)=>(o[s.TEXT]=s,o),Object.create(null))),q=l(()=>n.value.map(o=>o.TEXT)),V=l(()=>n.value.reduce((o,s)=>(o[s.TEXT]=s,o),Object.create(null))),U=l(()=>u.value==="read"),I=l(()=>u.value==="edit"),B=l(()=>u.value==="stub"),D=l(()=>I.value||B.value);return(o,s)=>(r(),m(t(F),null,{default:R(()=>[d("article",$,[d("header",Z,[v(t(Y),{text:o.$t("interests.title")},null,8,["text"]),U.value&&t(E)?(r(),m(t(y),{key:0,theme:"tertiary",icon:"pencil",round:"",dense:"",onClick:s[0]||(s[0]=e=>t(p)("edit"))})):h("",!0)]),d("div",ee,[U.value?(r(),T("div",te,[(r(!0),T(_,null,M(t(f),e=>(r(),m(t(S),{key:e.TEXT,text:e.TEXT,users:e.USERS,href:`/company/?apply_filter=Y&TAGS=${e.TEXT}`,clickable:"",outline:""},null,8,["text","users","href"]))),128))])):h("",!0),I.value?(r(),m(t(N),{key:1,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),tags:J.value,title:`${o.$t("interests.popup.title")}:`,"hint-popover-tags":q.value,"hint-popover-text":o.$t("interests.popup.description"),class:"kt-interests__tag-select",onSubmit:t(A),"onTag:search":t(x),"onTag:remove":t(k)},{"popover-tag":R(({tag:e,addPrepared:g})=>{var c;return[v(t(S),{text:e,users:(c=V.value[e])==null?void 0:c.USERS,outline:"",clickable:"",onClick:C=>g(e)},null,8,["text","users","onClick"])]}),tag:R(({tag:e,selected:g})=>{var c;return[v(t(S),{selected:g[e],text:e,users:(c=b.value[e])==null?void 0:c.USERS,outline:"",removable:"",onRemove:C=>t(k)(e)},null,8,["selected","text","users","onRemove"])]}),"prepared-tag":R(({tag:e,selected:g,removePrepared:c})=>{var C;return[v(t(S),{selected:g[e],text:e,users:(C=b.value[e])==null?void 0:C.USERS,outline:"",removable:"",onRemove:se=>c(e)},null,8,["selected","text","users","onRemove"])]}),_:1},8,["modelValue","tags","title","hint-popover-tags","hint-popover-text","onSubmit","onTag:search","onTag:remove"])):h("",!0),B.value?(r(),m(t(L),{key:2,icon:t(W),text:o.$t("interests.stub.description")},null,8,["icon","text"])):h("",!0)]),D.value?(r(),T("footer",oe,[B.value?(r(),m(t(y),{key:0,theme:"primary",class:"q-mx-auto",onClick:s[2]||(s[2]=e=>t(p)("edit"))},{default:R(()=>[d("span",null,G(o.$t("common.btn.add")),1),s[4]||(s[4]=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",fill:"none",class:"q-ml-sm"},[d("path",{fill:"currentColor",d:"M11.125 9.375V5h-1.25v4.375H5.5v1.25h4.375V15h1.25v-4.375H15.5v-1.25h-4.375Z"})],-1))]),_:1})):(r(),T(_,{key:1},[v(t(y),{theme:"primary",label:o.$t("common.btn.save"),onClick:s[3]||(s[3]=e=>t(A)())},null,8,["label"]),v(t(y),{theme:"ghost",label:o.$t("common.btn.cancel"),onClick:t(w)},null,8,["label","onClick"])],64))])):h("",!0)])]),_:1}))}});export{_e as default};
