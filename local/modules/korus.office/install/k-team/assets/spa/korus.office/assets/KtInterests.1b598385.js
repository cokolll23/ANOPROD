import{c4 as V,w as q,c as Q,r as A,L as U,x as a,R as p,af as F,av as T,ad as _,N as P,Y as M,y,aF as D,V as e,z as i,e as m,F as $,U as S,$ as E,aB as G,i as X,aI as R,aG as H,S as K}from"./index.a1748043.js";import{Q as O}from"./QMenu.8a4718ad.js";import{u as W,_ as x}from"./KtTag.109e9cf4.js";import{a as Y}from"./KtWidgetLayoutSkeleton.d2d36770.js";import{_ as j}from"./KtWidgetLayoutStubSkeleton.vue_vue_type_style_index_0_lang.2b6c8a5f.js";import"./QSkeleton.d8507126.js";import{_ as z}from"./KtWidgetLayoutText.4eb60d33.js";import{_ as C}from"./KtButton.5c4817ba.js";import"./QImg.7d3e6d1d.js";import"./QChip.2708c0c7.js";import"./KtUserCardSkeleton.a94624ce.js";import"./KtIconSkeleton.6843b24f.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QBtnDropdown.41a9457c.js";import"./colors.85fc653d.js";function J(l){const o=V();q(l,async()=>{if(l.value!=="edit")return!1;await o.loadPopular()})}function Z(l,o){const n=V(),u=Q(()=>n.INTERESTS.length?"read":"stub"),c=A(u.value),f=r=>{c.value=r},b=async()=>{const r=[...l.value];o.value!==""&&r.push(o.value),await n.add(r),l.value=[],o.value="",f(u.value)},v=async r=>{await n.removeOld(r),n.INTERESTS.length===0&&f(u.value)},k=()=>{l.value=[],f(u.value)},g=r=>{n.loadTips(r)};return J(c),{mode:c,changeMode:f,add:b,remove:v,cancel:k,search:g}}const ee={class:"kt-widget-layout-subtitle"},te=U({__name:"KtWidgetLayoutSubtitle",props:{text:{}},setup(l){const o=l;return(n,u)=>(a(),p("h3",ee,[F(n.$slots,"default",{},()=>[T(_(o.text),1)])]))}}),se={key:0},oe={key:2,class:"full-width"},ae={class:"q-my-md"},ne={class:"d-flex justify-center items-center q-gutter-md"},ge=U({__name:"KtInterests",setup(l){const{newTagModel:o,preparedTags:n,isHintPopupVisible:u,addPrepared:c,removePrepared:f,showHintPopup:b}=W(),{mode:v,changeMode:k,add:g,remove:r,cancel:B,search:w}=Z(n,o),{INTERESTS:h,POPULAR:I}=P(V()),{CAN_EDIT:L}=P(M());return(d,s)=>(a(),y(e(Y),{title:d.$t("interests.title"),"padding-bottom":"30px",class:"kt-interests"},D({default:i(()=>[e(v)==="read"?(a(),p("div",se,[(a(!0),p($,null,S(e(h),t=>(a(),y(e(x),{key:t.TEXT,text:t.TEXT,users:t.USERS,href:`/company/?apply_filter=Y&TAGS=${t.TEXT}`},null,8,["text","users","href"]))),128))])):E("",!0),e(v)==="stub"?(a(),y(e(j),{key:1,icon:"kt:hobbies",text:d.$t("interests.stub.description"),"btn-text":d.$t("interests.stub.btn"),onClick:s[1]||(s[1]=t=>e(k)("edit"))},null,8,["text","btn-text"])):E("",!0),e(v)==="edit"?(a(),p("div",oe,[m(G,{modelValue:e(o),"onUpdate:modelValue":s[3]||(s[3]=t=>X(o)?o.value=t:null),modelModifiers:{trim:!0},outlined:"",class:"kt-prepared-tags",onKeydown:[s[4]||(s[4]=R(t=>e(c)(),["space"])),R(e(g),["enter"]),s[5]||(s[5]=R(t=>e(f)(),["delete"])),s[6]||(s[6]=t=>e(b)())],onKeyup:s[7]||(s[7]=t=>e(w)(e(o))),onChange:s[8]||(s[8]=t=>e(w)(e(o)))},{default:i(()=>[(a(!0),p($,null,S(e(n),t=>(a(),y(e(x),{key:t,text:t,removable:"",onRemoveTag:N=>e(f)(t)},null,8,["text","onRemoveTag"]))),128)),m(O,{modelValue:e(u),"onUpdate:modelValue":s[2]||(s[2]=t=>X(u)?u.value=t:null),"no-focus":"",class:"kt-prepared-tags__popup"},{default:i(()=>[e(I).length>0?(a(),p($,{key:0},[m(e(te),{class:"q-mb-md"},{default:i(()=>[T(_(d.$t("interests.popup.title"))+": ",1)]),_:1}),(a(!0),p($,null,S(e(I),t=>(a(),y(e(x),{key:t.TEXT,text:t.TEXT,users:t.USERS,onClick:N=>e(c)(t.TEXT)},null,8,["text","users","onClick"]))),128)),m(H,{color:"app-grey-15",class:"q-my-lg"})],64)):E("",!0),m(e(z),{color:"app-grey-5"},{default:i(()=>[T(_(d.$t("interests.popup.description")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onKeydown"]),K("div",ae,[(a(!0),p($,null,S(e(h),t=>(a(),y(e(x),{key:t.TEXT,text:t.TEXT,users:t.USERS,removable:"",onRemoveTag:N=>e(r)(t)},null,8,["text","users","onRemoveTag"]))),128))]),K("div",ne,[m(e(C),{theme:"primary",onClick:e(g)},{default:i(()=>[T(_(d.$t("interests.save")),1)]),_:1},8,["onClick"]),m(e(C),{theme:"text",onClick:e(B)},{default:i(()=>[T(_(d.$t("interests.cancel")),1)]),_:1},8,["onClick"])])])):E("",!0)]),_:2},[e(v)==="read"&&e(L)?{name:"title-suffix",fn:i(()=>[m(e(C),{theme:"text",onClick:s[0]||(s[0]=t=>e(k)("edit"))},{default:i(()=>[T(_(d.$t("interests.edit")),1)]),_:1})]),key:"0"}:void 0]),1032,["title"]))}});export{ge as default};
