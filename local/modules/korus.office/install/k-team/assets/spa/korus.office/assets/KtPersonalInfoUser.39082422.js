import{L as C,r as x,t as ce,c as D,w as q,I as ee,d as _e,o as fe,x as n,R as m,S as p,af as b,V as c,ae as pe,aM as w,y as u,z as v,e as M,ad as h,al as z,$ as y,av as I,F as H,N as ve,Y as ge,U as re}from"./index.a1748043.js";import{_ as L}from"./KtWidgetLayoutRow.7ad5d39d.js";import{_ as B}from"./KtWidgetLayoutText.4eb60d33.js";import{_ as ae}from"./KtLink.5d7d273c.js";import{_ as te}from"./KtUserCardSkeleton.a94624ce.js";var A=null;function he(t){return A||(A=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(r){return setTimeout(r,16)}).bind(window)),A(t)}var j=null;function ye(t){j||(j=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(r){clearTimeout(r)}).bind(window)),j(t)}function me(t){var r=document.createElement("style");return r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),(document.querySelector("head")||document.body).appendChild(r),r}function N(t,r){r===void 0&&(r={});var e=document.createElement(t);return Object.keys(r).forEach(function(s){e[s]=r[s]}),e}function se(t,r,e){var s=window.getComputedStyle(t,e||null)||{display:"none"};return s[r]}function K(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};for(var r=t;r!==document;){if(se(r,"display")==="none")return{detached:!1,rendered:!1};r=r.parentNode}return{detached:!1,rendered:!0}}var xe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',U=0,T=null;function be(t,r){t.__resize_mutation_handler__||(t.__resize_mutation_handler__=we.bind(t));var e=t.__resize_listeners__;if(!e){if(t.__resize_listeners__=[],window.ResizeObserver){var s=t.offsetWidth,o=t.offsetHeight,i=new ResizeObserver(function(){!t.__resize_observer_triggered__&&(t.__resize_observer_triggered__=!0,t.offsetWidth===s&&t.offsetHeight===o)||W(t)}),a=K(t),d=a.detached,_=a.rendered;t.__resize_observer_triggered__=d===!1&&_===!1,t.__resize_observer__=i,i.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){W(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(U||(T=me(xe)),Ce(t),t.__resize_rendered__=K(t).rendered,window.MutationObserver){var f=new MutationObserver(t.__resize_mutation_handler__);f.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=f}}t.__resize_listeners__.push(r),U++}function ke(t,r){var e=t.__resize_listeners__;if(!!e){if(r&&e.splice(e.indexOf(r),1),!e.length||!r){if(t.detachEvent&&t.removeEventListener){t.detachEvent("onresize",t.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);return}t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",G),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null}!--U&&T&&T.parentNode.removeChild(T)}}function ze(t){var r=t.__resize_last__,e=r.width,s=r.height,o=t.offsetWidth,i=t.offsetHeight;return o!==e||i!==s?{width:o,height:i}:null}function we(){var t=K(this),r=t.rendered,e=t.detached;r!==this.__resize_rendered__&&(!e&&this.__resize_triggers__&&(Y(this),this.addEventListener("scroll",G,!0)),this.__resize_rendered__=r,W(this))}function G(){var t=this;Y(this),this.__resize_raf__&&ye(this.__resize_raf__),this.__resize_raf__=he(function(){var r=ze(t);r&&(t.__resize_last__=r,W(t))})}function W(t){!t||!t.__resize_listeners__||t.__resize_listeners__.forEach(function(r){r.call(t,t)})}function Ce(t){var r=se(t,"position");(!r||r==="static")&&(t.style.position="relative"),t.__resize_old_position__=r,t.__resize_last__={};var e=N("div",{className:"resize-triggers"}),s=N("div",{className:"resize-expand-trigger"}),o=N("div"),i=N("div",{className:"resize-contract-trigger"});s.appendChild(o),e.appendChild(s),e.appendChild(i),t.appendChild(e),t.__resize_triggers__={triggers:e,expand:s,expandChild:o,contract:i},Y(t),t.addEventListener("scroll",G,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}function Y(t){var r=t.__resize_triggers__,e=r.expand,s=r.expandChild,o=r.contract,i=o.scrollWidth,a=o.scrollHeight,d=e.offsetWidth,_=e.offsetHeight,f=e.scrollWidth,g=e.scrollHeight;o.scrollLeft=i,o.scrollTop=a,s.style.width=d+1+"px",s.style.height=_+1+"px",e.scrollLeft=f,e.scrollTop=g}const Se=["aria-label"];var ie=C({__name:"text-clamp",props:{text:{type:String,required:!0},maxHeight:{type:[String,Number],required:!1},maxLines:{type:Number,required:!1},expanded:{type:Boolean,required:!1,default:!1},location:{type:String,required:!1,default:"end"},ellipsis:{type:String,required:!1,default:"\u2026"},autoResize:{type:Boolean,required:!1,default:!1}},emits:["clamp-change","update:expanded"],setup(t,{emit:r}){const e=t,s=x(null),o=x(null),i=x(null),a=ce({offset:0,localExpanded:!!e.expanded,unregisterResizeCallback:null}),d=D(()=>{if(!a.localExpanded&&e.maxHeight)return typeof(e==null?void 0:e.maxHeight)=="number"?`${e==null?void 0:e.maxHeight}px`:e==null?void 0:e.maxHeight}),_=()=>{i.value&&(i.value.textContent=de.value)},f=()=>{a.localExpanded||(_(),(k()||S.value)&&O())},g=()=>{e.text&&(a.offset=e.text.length,R(),e.autoResize&&s.value&&(be(s.value,f),a.unregisterResizeCallback=()=>{s.value&&ke(s.value,f)}),f())},R=()=>{var l;(l=a.unregisterResizeCallback)==null||l.call(a)},k=()=>!(!e.maxLines&&!e.maxHeight)&&!!s.value&&(!!(e.maxLines&&V()>e.maxLines)||!!(e.maxHeight&&s.value.scrollHeight>s.value.offsetHeight)),V=()=>o.value?Object.keys(Array.prototype.slice.call(o.value.getClientRects()).reduce((l,{top:E,bottom:F})=>{const $=`${E}/${F}`;return l[$]||(l[$]=!0),l},{})).length:0,O=(...l)=>{const[E=0,F=a.offset]=l;if(F-E<=3)return void ne();const $=Math.floor((F+E)/2);P($),k()?O(E,$):O($,F)},P=l=>{a.offset=l,_()},ne=()=>{oe(),le()},oe=()=>{for(;(!k()||V()<2)&&a.offset<e.text.length;)Q(1)},le=()=>{for(;k()&&V()>1&&a.offset>0;)Q(-1)},Q=l=>{P(a.offset+l)},S=D(()=>!!e.text&&a.offset!==e.text.length);q(()=>S.value,l=>{setTimeout(()=>{r("clamp-change",l)},0)},{immediate:!0});const de=D(()=>S.value?ue.value:e.text),ue=D(()=>{if(e.location==="start")return e.ellipsis+(e.text.slice(-a.offset)||"").trim();if(e.location==="middle"){const l=Math.floor(a.offset/2);return(e.text.slice(0,l)||"").trim()+e.ellipsis+(e.text.slice(-l)||"").trim()}return(e.text.slice(0,a.offset)||"").trim()+e.ellipsis}),J=()=>{a.localExpanded=!0},X=()=>{a.localExpanded=!1},Z=()=>{a.localExpanded=!a.localExpanded};return q(()=>e.expanded,l=>{a.localExpanded=l}),q(()=>a.localExpanded,l=>{l?P(e.text.length):f(),e.expanded!==l&&r("update:expanded",l)}),q(()=>[e.maxLines,e.maxHeight,e.ellipsis,e.location,S.value].join(),()=>{ee(()=>{f()})}),q(()=>[e.text,e.autoResize].join(),()=>{ee(()=>{g()})}),_e(()=>{R()}),fe(()=>{g()}),(l,E)=>(n(),m("div",{ref_key:"textClampRef",ref:s,class:"text-clamp",style:pe({overflow:"hidden",maxHeight:c(d)})},[p("span",{ref_key:"contentRef",ref:o},[b(l.$slots,"before",{expand:J,collapse:X,toggle:Z,clamped:c(S),expanded:a.localExpanded}),p("span",{ref_key:"textRef",ref:i,"aria-label":t.text},null,8,Se),b(l.$slots,"after",{expand:J,collapse:X,toggle:Z,clamped:c(S),expanded:a.localExpanded})],512)],4))}});ie.__file="package/text-clamp.vue";const Ee=t=>(t.install=function(r){r.component(t.__name,t)},t),$e=Ee(ie),Le={key:0,class:"layout-text-clamp"},Ue=C({__name:"KtPersonalInfoText",props:{label:{},content:{},color:{},fieldCode:{},private:{type:Boolean},hidden:{type:Boolean}},setup(t){const r=w(),e=t,s=x(e.hidden),o=()=>{const i=new FormData;i.set("fieldCode",String(e.fieldCode)),i.set("value",String(s.value?0:1)),r.changeVisibility(i),s.value=!s.value};return(i,a)=>(n(),u(c(L),{label:e.label},{default:v(()=>[M(c(B),{color:e.color},{default:v(()=>[b(i.$slots,"default",{},()=>[e.fieldCode==="UF_WEB_SITES"?(n(),m("span",Le,h(e.content),1)):(n(),u(c($e),{key:1,text:e.content},null,8,["text"]))]),e.private?(n(),u(z,{key:0,name:s.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"private-toggle-icon q-ml-sm",style:{cursor:"pointer"},onClick:o},null,8,["name"])):y("",!0)]),_:3},8,["color"])]),_:3},8,["label"]))}});const Be={class:"layout-text-clamp"},Ge=C({__name:"KtPersonalInfoLink",props:{label:{},content:{},isEmpty:{type:Boolean},href:{},theme:{default:"primary"},fieldCode:{},private:{type:Boolean},hidden:{type:Boolean}},setup(t){const r=w(),e=t,s=x(e.hidden),o=()=>{const a=new FormData;a.set("fieldCode",String(e.fieldCode)),a.set("value",String(s.value?0:1)),r.changeVisibility(a),s.value=!s.value},i=(a,d)=>d==="PERSONAL_WWW"?a.startsWith("http://")||a.startsWith("https://")?a:`https://${a}`:d==="EMAIL"?a.startsWith("mailto:")?a:`mailto:${a}`:a;return(a,d)=>(n(),u(c(L),{label:e.label},{default:v(()=>[e.isEmpty?(n(),u(c(B),{key:0,color:e.color},{default:v(()=>[b(a.$slots,"default",{},()=>[I(h(e.content),1)]),e.private?(n(),u(z,{key:0,name:s.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"q-ml-sm private-toggle-icon",style:{cursor:"pointer"},onClick:o},null,8,["name"])):y("",!0)]),_:3},8,["color"])):(n(),m(H,{key:1},[M(c(ae),{href:i(e.href?e.href:e.content,e.fieldCode),theme:e.theme},{default:v(()=>[b(a.$slots,"default",{},()=>[p("span",Be,h(e.content),1)])]),_:3},8,["href","theme"]),e.private?(n(),u(z,{key:0,name:s.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"q-ml-sm private-toggle-icon",style:{cursor:"pointer"},onClick:o},null,8,["name"])):y("",!0)],64))]),_:3},8,["label"]))}}),Ye=C({__name:"KtPersonalInfoPhone",props:{label:{},content:{},color:{},private:{type:Boolean},hidden:{type:Boolean},fieldCode:{}},setup(t){const r=w(),{IS_OWN_PROFILE:e}=ve(ge()),s=t,o=D(()=>s.private?e.value||!s.hidden:!0),i=x(s.hidden),a=()=>{const d=new FormData;d.set("fieldCode",String(s.fieldCode)),d.set("value",String(i.value?0:1)),r.changeVisibility(d),i.value=!i.value};return(d,_)=>o.value?(n(),u(c(L),{key:0,label:s.label},{default:v(()=>[M(c(B),{color:s.color},{default:v(()=>[b(d.$slots,"default",{},()=>[I(h(s.content),1)]),s.private?(n(),u(z,{key:0,name:i.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"q-ml-sm private-toggle-icon",style:{cursor:"pointer"},onClick:a},null,8,["name"])):y("",!0)]),_:3},8,["color"])]),_:3},8,["label"])):y("",!0)}});const Re={key:1,class:"kt-messenger-list"},Fe={class:"kt-messenger-item__icon"},Qe=C({__name:"KtPersonalInfoMessengers",props:{label:{},content:{},color:{},isEmpty:{type:Boolean},fieldCode:{},private:{type:Boolean},hidden:{type:Boolean}},setup(t){const r=w(),e=t,s=w(),o=_=>{const R=s.$state.items.find(k=>k.name==="UF_MESSENGERS").data.fieldInfo.SETTINGS.find(k=>k.code===_);return R&&R.template||""},i=_=>{const f=o(_.messenger);return f?f.replace("#login#",_.value):_.value},a=x(e.hidden),d=()=>{const _=new FormData;_.set("fieldCode",String(e.fieldCode)),_.set("value",String(a.value?0:1)),r.changeVisibility(_),a.value=!a.value};return(_,f)=>(n(),u(c(L),{label:e.label},{default:v(()=>[e.isEmpty?(n(),u(c(B),{key:0,color:e.color},{default:v(()=>[b(_.$slots,"default",{},()=>[I(h(e.content),1)]),e.private?(n(),u(z,{key:0,name:a.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"q-ml-sm private-toggle-icon",style:{cursor:"pointer"},onClick:d},null,8,["name"])):y("",!0)]),_:3},8,["color"])):(n(),m("ul",Re,[(n(!0),m(H,null,re(e.content,g=>(n(),m("li",{key:g.messenger,class:"kt-messenger-item"},[M(c(ae),{target:"_blank",href:i(g),text:g.value,theme:"primary"},null,8,["href","text"]),p("span",Fe,h(g.messenger),1),e.private?(n(),u(z,{key:0,name:a.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"q-ml-sm",style:{cursor:"pointer"},onClick:d},null,8,["name"])):y("",!0)]))),128))]))]),_:3},8,["label"]))}});const qe={class:"kt-widget-layout-row"},De={class:"kt-widget-layout-row__content"},He={class:"kt-widget-layout-row"},Ie={class:"kt-widget-layout-row__content"},Ne={class:"kt-widget-layout-row"},Te={class:"kt-widget-layout-row__content"},We={class:"text-right"},Me=["href"],Je=C({__name:"KtPersonalInfoWorkplace",props:{label:{},content:{},color:{},mapLink:{},isEmpty:{type:Boolean},fieldCode:{},private:{type:Boolean},hidden:{type:Boolean}},setup(t){const r=w(),e=t,s=x(e.hidden),o=()=>{const i=new FormData;i.set("fieldCode",String(e.fieldCode)),i.set("value",String(s.value?0:1)),r.changeVisibility(i),s.value=!s.value};return(i,a)=>(n(),u(c(L),{label:e.label},{default:v(()=>[e.isEmpty?(n(),u(c(B),{key:0,color:e.color},{default:v(()=>[b(i.$slots,"default",{},()=>[I(h(e.content),1)]),e.private?(n(),u(z,{key:0,name:s.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"q-ml-sm private-toggle-icon",style:{cursor:"pointer"},onClick:o},null,8,["name"])):y("",!0)]),_:3},8,["color"])):(n(),m(H,{key:1},[p("div",qe,[a[0]||(a[0]=p("div",{class:"kt-widget-layout-text kt-widget-layout-row__label"}," \u041E\u0444\u0438\u0441: ",-1)),p("div",De,h(e.content.CITY),1)]),p("div",He,[a[1]||(a[1]=p("div",{class:"kt-widget-layout-text kt-widget-layout-row__label"}," \u042D\u0442\u0430\u0436: ",-1)),p("div",Ie,h(e.content.FLOOR),1)]),p("div",Ne,[a[2]||(a[2]=p("div",{class:"kt-widget-layout-text kt-widget-layout-row__label"}," \u041D\u043E\u043C\u0435\u0440 \u0440\u0430\u0431\u043E\u0447\u0435\u0433\u043E \u043C\u0435\u0441\u0442\u0430: ",-1)),p("div",Te,h(e.content.NUMBER),1)]),p("div",We,[p("a",{href:e.content.URL},"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043D\u0430 \u043A\u0430\u0440\u0442\u0435",8,Me)])],64))]),_:3},8,["label"]))}}),Ve={key:0,class:"flex column"},Xe=C({__name:"KtPersonalInfoUser",props:{label:{},user:{},multiple:{type:Boolean},justify:{},classList:{},fieldCode:{},private:{type:Boolean},hidden:{type:Boolean}},setup(t){const r=w(),e=t,s=x(e.hidden),o=()=>{const i=new FormData;i.set("fieldCode",String(e.fieldCode)),i.set("value",String(s.value?0:1)),r.changeVisibility(i),s.value=!s.value};return(i,a)=>(n(),u(c(L),{label:e.label,"y-aligment":"center","class-list":e.classList},{default:v(()=>[e.private?(n(),u(z,{key:0,name:s.value?"kt:eye-slashed":"kt:eye",size:"16px",color:"primary",class:"private-toggle-icon q-ml-sm",style:{cursor:"pointer"},onClick:o},null,8,["name"])):y("",!0),e.user?(n(),m(H,{key:1},[e.multiple?(n(),m("div",Ve,[(n(!0),m(H,null,re(e.user,d=>(n(),u(c(te),{user:d,theme:"secondary",justify:e.justify,key:d.ID},null,8,["user","justify"]))),128))])):y("",!0),e.multiple?y("",!0):(n(),u(c(te),{key:1,user:e.user,theme:"secondary",justify:e.justify},null,8,["user","justify"]))],64)):(n(),u(c(B),{key:2,color:"app-grey-5",class:"kt-widget-layout-row__label text-center"},{default:v(()=>[I(h(i.$t("personalPhoto.replacementStaffNone")),1)]),_:1})),b(i.$slots,"footer")]),_:3},8,["label","class-list"]))}});export{Xe as _,Ue as a,Je as b,Qe as c,Ye as d,Ge as e};
