import{a as O,Q as x,b as L}from"./QItemLabel.b302d2e1.js";import{Q as V}from"./QList.41df81dd.js";import{C as A}from"./ClosePopup.034ffd88.js";import{c as $}from"./colors.85fc653d.js";import{L as D,dQ as M,N as p,aL as U,aO as Q,Y as R,c1 as w,c as g,x as a,y as l,z as r,S as c,V as e,R as m,F as K,U as X,a0 as F,e as s,av as v,ad as d,$ as n}from"./index.a1748043.js";import{u as W}from"./vue-i18n.esm-bundler.e5a16dbd.js";import{u as Y}from"./useMenu.f7fa8a96.js";import{k as z,x as H,_ as y}from"./KtViewCounter.d7f8eb76.js";import{d as j,e as q,f as G,K as J}from"./KtWidgetWrapper.6a945d5d.js";import"./QSkeleton.d8507126.js";import"./QBadge.cb8db555.js";import"./index.2f026771.js";import"./QBtnDropdown.41a9457c.js";import"./QMenu.8a4718ad.js";import"./QDate.59abae0b.js";import"./use-render-cache.3aae9b27.js";import"./QScrollArea.ec251a08.js";import"./QResizeObserver.988c698f.js";import"./QScrollObserver.bf79761e.js";import"./touch.9135741d.js";import"./QTabs.a9c1b64a.js";import"./rtl.276c3f1b.js";import"./QExpansionItem.ec578cd9.js";import"./QImg.7d3e6d1d.js";import"./IndexPage.75cfb3f1.js";import"./QPagination.de182206.js";import"./QSelect.1740ff4d.js";import"./QChip.2708c0c7.js";import"./QTabPanels.aa3c86a4.js";import"./index.43b0bc22.js";import"./useAvatarUploader.88af71b4.js";import"./grid.65269509.js";import"./plugin-vue_export-helper.21dcd24c.js";const Z={class:"kt-personal-photo"},ee={class:"kt-personal-photo__header"},te={class:"kt-personal-photo__avatar-wrapper"},ae={key:1,class:"kt-personal-photo__palm-icon-wr"},oe={key:0,class:"kt-personal-photo__vacation"},se={class:"kt-personal-photo__vacation-period"},re={key:1,class:"kt-personal-photo__actions"},Fe=D({__name:"KtPersonalPhoto",setup(ne){const k=M(),{STATUS:i,ONLINE_STATUS:h}=p(U()),{hasBadges:S}=p(Q()),{CAN_EDIT:T,IS_OWN_PROFILE:f,SHOW_SONET_ADMIN:C,EDIT_DEPUTY:le}=p(R()),{VACATION:ie,VACATION_FORMATTED:u,USERS:pe}=p(w()),{t:P}=W(),{menu:b}=Y(),{getPaletteColor:o}=$,I=g(()=>!!i.value&&(!(i.value==="employee"&&(f.value||!T.value))||C.value)),N=g(()=>{const t={text:P(`personalPhoto.status.${i.value}`),color:o("white"),background:""};switch(i.value){case"admin":t.background=o("primary");break;case"integrator":t.background=o("app-blue-2");break;case"extranet":t.background=o("app-orange-1");break;case"fired":t.background=o("app-grey-8");break;case"invited":t.background=o("app-green-1");break;case"email":case"shop":case"visitor":t.background=o("app-grey-5");break;case"employee":t.color=o("app-grey-5"),t.background="transparent";break}return t});function E(){BX.ready(function(){BX.Messenger.v2.Lib.Opener.openChat(k.params.id)})}function B(){BX.ready(function(){BX.Messenger.v2.Lib.Opener.startVideoCall(k.params.id,!0)})}return(t,ce)=>(a(),l(e(J),null,{default:r(()=>[c("article",Z,[c("header",ee,[I.value?(a(),l(e(z),{key:0,theme:"tertiary",dense:"",label:N.value.text},{default:r(()=>[e(b).length>0?(a(),l(V,{key:0},{default:r(()=>[(a(!0),m(K,null,X(e(b),_=>F((a(),l(O,{key:_.text,clickable:"",onClick:_.handler},{default:r(()=>[s(x,null,{default:r(()=>[s(L,null,{default:r(()=>[v(d(_.text),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[A]])),128))]),_:1})):n("",!0)]),_:1},8,["label"])):n("",!0),s(e(j),{"is-online":e(h).IS_ONLINE,text:e(h).STATUS_TEXT,class:"kt-personal-photo__status"},null,8,["is-online","text"])]),c("div",te,[s(e(q)),e(S)?(a(),l(e(G),{key:0,class:"kt-personal-photo__badges"})):n("",!0),e(u)?(a(),m("div",ae,[s(e(H),{name:"palm",class:"kt-personal-photo__palm-icon"})])):n("",!0)]),e(u)?(a(),m("div",oe,[v(d(t.$t("personalPhoto.currentVacationLabel"))+": ",1),c("span",se,d(e(u)),1)])):n("",!0),e(f)?n("",!0):(a(),m("div",re,[s(e(y),{theme:"tertiary",dense:"",label:t.$t("personalPhoto.chatMessage"),onClick:E},null,8,["label"]),s(e(y),{theme:"tertiary",dense:"",label:t.$t("personalPhoto.videoCall"),onClick:B},null,8,["label"])]))])]),_:1}))}});export{Fe as default};
