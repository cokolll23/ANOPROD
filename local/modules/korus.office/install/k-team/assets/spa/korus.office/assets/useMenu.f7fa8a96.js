import{N as p,aL as H,Y as T,c as i,dR as c}from"./index.a1748043.js";import{u as _}from"./vue-i18n.esm-bundler.e5a16dbd.js";function V(){const{STATUS:e,IS_CURRENT_USER_INTEGRATOR:t,IS_EXTRANET_USER:r,IS_CLOUD:o}=p(H()),{SHOW_SONET_ADMIN:h,CAN_EDIT:n,IS_OWN_PROFILE:a}=p(T()),d=i(()=>h.value),v=i(()=>e.value==="admin"&&n.value&&!a.value),I=i(()=>e.value==="employee"&&n.value&&!a.value&&!t.value),l=i(()=>(e.value==="admin"||e.value==="employee"||e.value==="integrator"||r.value)&&n.value&&!a.value&&!["email","shop"].includes(e.value)),R=i(()=>e.value==="fired"&&n.value&&!a.value),m=i(()=>e.value==="invited"&&n.value&&!a.value),g=i(()=>r.value&&n.value&&!a.value&&o.value),U=i(()=>o.value&&n.value&&!a.value&&e.value!=="integrator");return{isAdminModeItemVisible:d,isRemoveAdminRightsItemVisible:v,isSetAdminRightsItemVisible:I,isFireUserItemVisible:l,isHireUserItemVisible:R,isReinviteUserItemVisible:m,isMoveToIntranetItemVisible:g,isSetIntegratorRightsItemVisible:U}}function M(){const{t:e}=_(),t=H(),{STATUS:r,IS_FIRE_USER_ENABLED:o,ADMIN_RIGHTS_RESTRICTED:h,DELEGATE_ADMIN_RIGHTS_RESTRICTED:n}=p(t),a=async()=>{await t.setAdmin()},d=async()=>{await a()},v=async()=>{await t.removeAdminRights()},I=async()=>{await v()},l=async()=>{await t.setAdminRights()},R=async()=>{if(h.value){if(n.value){top.BX.UI.InfoHelper.show("limit_admin_admins");return}try{await c({message:e("personalPhoto.menu.moveAdminRightsConfirm"),html:!0}),await l()}catch{}}else await l()},m=async()=>{await t.fireUser()},g=async()=>{if(!o.value&&r.value!=="integrator"){top.BX.UI.InfoHelper.show("limit_dismiss");return}try{await c({message:e("personalPhoto.menu.fireUserConfirm")}),await m()}catch{}},U=async()=>{try{await c({message:e("personalPhoto.menu.fireInvitedUser"),html:!0}),await m()}catch{}},f=async()=>{await t.hireUser()},A=async()=>{try{await c({message:e("personalPhoto.menu.hireUserConfirm")}),await f()}catch{}},w=async()=>{await t.reinviteUser()},y=async()=>{await w()},S=async()=>{try{await t.deleteUser()}catch{await U()}},s=async()=>{try{await c({message:e("personalPhoto.menu.deleteUserConfirm")}),await S()}catch{}},E=async()=>{await t.moveToIntranet()},P=async()=>{await E()},b=async()=>{await t.setIntegratorRights()};return{setAdminHandler:d,setAdminRightsHandler:R,removeAdminRightsHandler:I,fireUserHandler:g,hireUserHandler:A,reinviteUserHandler:y,deleteUserHandler:s,moveToIntranetHandler:P,setIntegratorRightsHandler:async()=>{try{await c({message:e("personalPhoto.menu.setIntegratorRightsConfirm")}),await b()}catch{}}}}function D(){const{t:e}=_(),{IS_SESSION_ADMIN:t}=p(T()),{isAdminModeItemVisible:r,isRemoveAdminRightsItemVisible:o,isSetAdminRightsItemVisible:h,isFireUserItemVisible:n,isHireUserItemVisible:a,isReinviteUserItemVisible:d,isMoveToIntranetItemVisible:v,isSetIntegratorRightsItemVisible:I}=V(),{setAdminHandler:l,removeAdminRightsHandler:R,setAdminRightsHandler:m,fireUserHandler:g,hireUserHandler:U,reinviteUserHandler:f,deleteUserHandler:A,moveToIntranetHandler:w,setIntegratorRightsHandler:y}=M();return{menu:i(()=>{const s=[];return r.value&&s.push({text:t.value?e("personalPhoto.menu.quitAdminMode"):e("personalPhoto.menu.adminMode"),handler:l}),o.value&&s.push({text:e("personalPhoto.menu.removeAdminRights"),handler:R}),h.value&&s.push({text:e("personalPhoto.menu.setAdminRights"),handler:m}),n.value&&s.push({text:e("personalPhoto.menu.fireUser"),handler:g}),a.value&&s.push({text:e("personalPhoto.menu.hireUser"),handler:U}),d.value&&(s.push({text:e("personalPhoto.menu.reinviteUser"),handler:f}),s.push({text:e("personalPhoto.menu.deleteUser"),handler:A})),v.value&&s.push({text:e("personalPhoto.menu.moveToIntranet"),handler:w}),I.value&&s.push({text:e("personalPhoto.menu.setIntegratorRights"),handler:y}),s})}}export{D as u};
